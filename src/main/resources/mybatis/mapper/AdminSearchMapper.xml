<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.busanbank.card.admin.dao.IAdminSearchDao">
    <!-- 추천어 목록 -->
    <select id="getRecommendedWords" resultType="map">
        SELECT RECOMMENDED_NO, KEYWORD, REG_DATE
        FROM RECOMMENDED_WORD
        ORDER BY REG_DATE DESC
    </select>

    <!-- 금칙어 목록 -->
    <select id="getProhibitedWords" resultType="map">
        SELECT PROHIBITED_NO, KEYWORD, REG_DATE
        FROM PROHIBITED_WORD
        ORDER BY REG_DATE DESC
    </select>

    <!-- 검색 로그 목록 -->
    <select id="getSearchLogs" resultType="map">
        SELECT SEARCH_LOG_NO, MEMBER_NO, KEYWORD, IS_PROHIBITED, IS_RECOMMENDED, SEARCH_DATE
        FROM SEARCH_LOG
        ORDER BY SEARCH_DATE DESC
    </select>

    <!-- 인기 검색어 TOP 10 -->
    <select id="getTopKeywords" resultType="map">
        SELECT KEYWORD, COUNT(*) AS CNT
        FROM SEARCH_LOG
        GROUP BY KEYWORD
        ORDER BY CNT DESC
        FETCH FIRST 10 ROWS ONLY
    </select>

    <!-- 최근 검색어 30건 -->
    <select id="getRecentSearchLogs" resultType="map">
        SELECT SEARCH_LOG_NO, MEMBER_NO, KEYWORD, IS_PROHIBITED, IS_RECOMMENDED, SEARCH_DATE
        FROM SEARCH_LOG
        ORDER BY SEARCH_DATE DESC
        FETCH FIRST 30 ROWS ONLY
    </select>
  </mapper>